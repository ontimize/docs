<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/docs/v1/assets/css/just-the-docs-default.css"> <style type="text/css"> .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.external):nth-child(7) > .nav-list-link { display: block; font-weight: 600; text-decoration: none; background-image: linear-gradient(-90deg, #eaeaea 0%, rgba(234, 234, 234, 0.8) 80%, rgba(234, 234, 234, 0) 100%); } .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:nth-child(7) > .nav-list-expander svg { transform: rotate(-90deg); } .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:nth-child(7) > .nav-list { display: block; } .site-nav > .nav-category-list > .nav-list-item > .nav-list-expander svg { transform: rotate(-90deg); } .site-nav > .nav-category-list > .nav-list-item > .nav-list { display: block; } </style> <script src="/docs/v1/assets/js/vendor/lunr.min.js"></script> <script src="/docs/v1/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>LDAP Security | Ontimize Boot</title> <meta name="generator" content="Jekyll v4.3.2" /> <meta property="og:title" content="LDAP Security" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Table of Contents" /> <meta property="og:description" content="Table of Contents" /> <link rel="canonical" href="https://ontimize.github.io/docs/v1/basics/ldap/" /> <meta property="og:url" content="https://ontimize.github.io/docs/v1/basics/ldap/" /> <meta property="og:site_name" content="Ontimize Boot" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="LDAP Security" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Table of Contents","headline":"LDAP Security","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ontimize.github.io/docs/v1/assets/icons/logo-ontimize-blanco.png"}},"url":"https://ontimize.github.io/docs/v1/basics/ldap/"}</script> <!-- End Jekyll SEO tag --> <!-- start custom head snippets --> <link rel="apple-touch-icon" sizes="57x57" href="https://ontimize.github.io/docs/v1/assets/icons/apple-icon-57x57.png?v=M44lzPylqQ"> <link rel="apple-touch-icon" sizes="60x60" href="https://ontimize.github.io/docs/v1/assets/icons/apple-icon-60x60.png?v=M44lzPylqQ"> <link rel="apple-touch-icon" sizes="72x72" href="https://ontimize.github.io/docs/v1/assets/icons/apple-icon-72x72.png?v=M44lzPylqQ"> <link rel="apple-touch-icon" sizes="76x76" href="https://ontimize.github.io/docs/v1/assets/icons/apple-icon-76x76.png?v=M44lzPylqQ"> <link rel="apple-touch-icon" sizes="114x114" href="https://ontimize.github.io/docs/v1/assets/icons/apple-icon-114x114.png?v=M44lzPylqQ"> <link rel="apple-touch-icon" sizes="120x120" href="https://ontimize.github.io/docs/v1/assets/icons/apple-icon-120x120.png?v=M44lzPylqQ"> <link rel="apple-touch-icon" sizes="144x144" href="https://ontimize.github.io/docs/v1/assets/icons/apple-icon-144x144.png?v=M44lzPylqQ"> <link rel="apple-touch-icon" sizes="152x152" href="https://ontimize.github.io/docs/v1/assets/icons/apple-icon-152x152.png?v=M44lzPylqQ"> <link rel="apple-touch-icon" sizes="180x180" href="https://ontimize.github.io/docs/v1/assets/icons/apple-icon-180x180.png?v=M44lzPylqQ"> <link rel="icon" type="image/png" href="https://ontimize.github.io/docs/v1/assets/icons/favicon-16x16.png?v=M44lzPylqQ" sizes="16x16"> <link rel="icon" type="image/png" href="https://ontimize.github.io/docs/v1/assets/icons/favicon-32x32.png?v=M44lzPylqQ" sizes="32x32"> <link rel="icon" type="image/png" href="https://ontimize.github.io/docs/v1/assets/icons/favicon-96x96.png?v=M44lzPylqQ" sizes="96x96"> <link rel="icon" type="image/png" href="https://ontimize.github.io/docs/v1/assets/icons/android-icon-192x192.png?v=M44lzPylqQ" sizes="192x192"> <link rel="manifest" href="https://ontimize.github.io/docs/v1/assets/icons/manifest.json?v=M44lzPylqQ"> <link rel="shortcut icon" href="/assets/icons/favicon.ico?v=M44lzPylqQ"> <meta name="msapplication-TileColor" content="#000000"> <meta name="msapplication-TileImage" content="https://ontimize.github.io/docs/v1/assets/icons/mstile-144x144.png?v=M44lzPylqQ"> <meta name="msapplication-config" content="https://ontimize.github.io/docs/v1/assets/icons/browserconfig.xml?v=M44lzPylqQ"> <meta name="theme-color" content="#ffffff"> <link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet"> <link rel="stylesheet" href="https://ontimize.github.io/docs/v1/assets/jstree/style.min.css" /> <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.1/jquery.min.js"></script> <script src="https://ontimize.github.io/docs/v1/assets/jstree/jstree.min.js"></script> <script>$(document).ready(function () { $('.jstreeloader').jstree(); });</script> <!-- end custom head snippets --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/docs/v1/" class="site-title lh-tight"> <div class="site-logo" role="img" aria-label="Ontimize Boot"></div> </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/docs/v1/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/docs/v1/introduction/" class="nav-list-link">Introduction</a></li><li class="nav-list-item"><a href="/docs/v1/getting_started/" class="nav-list-link">Getting started</a></li><li class="nav-list-item"><a href="/docs/v1/basics/autoconfigurators/" class="nav-list-link">Autoconfigurators</a></li><li class="nav-list-item"><a href="/docs/v1/basics/dms/" class="nav-list-link">DMS System</a></li><li class="nav-list-item"><a href="/docs/v1/basics/i18n/" class="nav-list-link">I18N System</a></li><li class="nav-list-item"><a href="/docs/v1/basics/ldap/" class="nav-list-link">LDAP Security</a></li><li class="nav-list-item"><a href="/docs/v1/basics/mail/" class="nav-list-link">Mail System</a></li><li class="nav-list-item"><a href="/docs/v1/basics/" class="nav-list-link">Ontimize Basics</a></li><li class="nav-list-item"><a href="/docs/v1/basics/security/" class="nav-list-link">Security System</a></li><li class="nav-list-item"><a href="/docs/v1/basics/applicationyml/" class="nav-list-link">Understanding application.yml</a></li><li class="nav-list-item"><a href="/docs/v1/basics/complexqueries/" class="nav-list-link">Using complex queries</a></li></ul> </nav> <footer class="site-footer"> © 2023 Imatia Innovation, S.L. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Ontimize Boot" aria-label="Search Ontimize Boot" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <div class="header-custom-main"> <div class="github-div"> <a href="https://github.com/Ontimize" target="_blank"> <img src="https://ontimize.github.io/docs/v1/assets/icons/github-front.svg" width="42px" height="42px" alt="Ontimize"> </a> </div> <select class="select" name="version" onchange="window.open(this.value,'_self')"> <option value="https://ontimize.github.io/docs/v1" selected> 1.x.x </option> <option value="https://ontimize.github.io/docs/v3" > 3.x.x </option> </select> </div> </div> <div class="main-content-wrap"> <div id="main-content" class="main-content"> <main> <aside class="sidebar__right"> <nav class="toc"><header> <h4 class="nav__title"> Table of Contents </h4> </header> <ul class="toc__menu" id="markdown-toc"> <li><a href="#introduction" id="markdown-toc-introduction">Introduction</a></li> <li><a href="#prerequisites" id="markdown-toc-prerequisites">Prerequisites</a></li> <li><a href="#steps" id="markdown-toc-steps">Steps</a> <ul> <li><a href="#database" id="markdown-toc-database">Database</a> <ul> <li><a href="#add-a-new-user" id="markdown-toc-add-a-new-user">Add a new user</a></li> </ul> </li> <li><a href="#autoconfigurators" id="markdown-toc-autoconfigurators">Autoconfigurators</a> <ul> <li><a href="#add-ldap-autoconfigurators" id="markdown-toc-add-ldap-autoconfigurators">Add LDAP autoconfigurators</a></li> </ul> </li> <li><a href="#modify-applicationyml" id="markdown-toc-modify-applicationyml">Modify application.yml</a> <ul> <li><a href="#add-ldap-properties" id="markdown-toc-add-ldap-properties">Add LDAP properties</a></li> </ul> </li> </ul> </li> </ul> </nav> </aside> <h1 id="introduction"> <a href="#introduction" class="anchor-heading" aria-labelledby="introduction"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Introduction </h1> <p>The <strong>L</strong>ightweight <strong>D</strong>irectory <strong>A</strong>ccess <strong>P</strong>rotocol (<strong>LDAP</strong>) is an open protocol for accessing a company&#8217;s information services. Typically, this protocol is used to provide all company users with an easy way to use all services that require access credentials with a single username and password.</p> <h1 id="prerequisites"> <a href="#prerequisites" class="anchor-heading" aria-labelledby="prerequisites"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Prerequisites </h1> <p>You can follow this tutorial using your own application, although for this example we will use an application created using the archetype that can be found <a href="https://ontimize.github.io/docs/v1/getting_started/">on this page</a> and with a REST service.</p> <p>There are 2 options to follow this tutorial, clone the repository with the initial state and follow the tutorial step by step, or download the final example and see which files are new and which have been updated.</p> <div class="multiColumnRow multiColumnRowJustify"> <div class="multiColumn multiColumnGrow"> <p><strong>Initial project</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/$ git clone https://github.com/ontimize/ontimize-examples
/ontimize-examples$ cd ontimize-examples
/ontimize-examples$ git checkout boot-ldap-login-1.x.x-initial
</code></pre></div></div> </div> <div class="verticalDivider"></div> <div class="multiColumn multiColumnGrow"> <p><strong>Final example</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/$ git clone https://github.com/ontimize/ontimize-examples
/ontimize-examples$ cd ontimize-examples
/ontimize-examples$ git checkout boot-ldap-login-1.x.x
</code></pre></div></div> </div> </div> <h1 id="steps"> <a href="#steps" class="anchor-heading" aria-labelledby="steps"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Steps </h1> <h2 id="database"> <a href="#database" class="anchor-heading" aria-labelledby="database"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Database </h2> <h3 id="add-a-new-user"> <a href="#add-a-new-user" class="anchor-heading" aria-labelledby="add-a-new-user"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Add a new user </h3> <p>With the database started, we create a new user with the same username that we have registered in the domain. When we try to login we need to use the password of the domain, not the password that inserts into the database. Then, we need to bind this new user with an existing role.</p> <figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">TUSER</span> <span class="p">(</span><span class="n">USER_</span><span class="p">,</span> <span class="n">PASSWORD</span><span class="p">,</span> <span class="n">NAME</span><span class="p">,</span> <span class="n">SURNAME</span><span class="p">,</span> <span class="n">EMAIL</span><span class="p">,</span> <span class="n">NIF</span><span class="p">,</span> <span class="n">USERBLOCKED</span><span class="p">,</span> <span class="n">LASTPASSWORDUPDATE</span><span class="p">,</span> <span class="n">FIRSTLOGIN</span><span class="p">)</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'domain.username'</span><span class="p">,</span> <span class="s1">'somepassword'</span><span class="p">,</span> <span class="s1">'Name'</span><span class="p">,</span> <span class="s1">'Surname'</span><span class="p">,</span> <span class="s1">'Email'</span><span class="p">,</span> <span class="s1">'Nif'</span><span class="p">,</span> <span class="k">NULL</span><span class="p">,</span> <span class="k">NULL</span><span class="p">,</span> <span class="k">NULL</span><span class="p">)</span></code></pre></figure> <figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">TUSER_ROLE</span> <span class="p">(</span><span class="n">ID_ROLENAME</span><span class="p">,</span><span class="n">USER_</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="s1">'domain.username'</span><span class="p">);</span></code></pre></figure> <h2 id="autoconfigurators"> <a href="#autoconfigurators" class="anchor-heading" aria-labelledby="autoconfigurators"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Autoconfigurators </h2> <h3 id="add-ldap-autoconfigurators"> <a href="#add-ldap-autoconfigurators" class="anchor-heading" aria-labelledby="add-ldap-autoconfigurators"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Add LDAP autoconfigurators </h3> <div class="multiColumnRow"> <div class="multiColumn jstreeloader"> <ul> <li data-jstree="{&quot;opened&quot;:true, &quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> ontimize-examples <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> projectwiki-api <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> src <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> main <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> java <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> com <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> ontimize <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> projectwiki <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> api <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> core <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> service <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">IUserService.java</li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">pom.xml</li> </ul> </li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> projectwiki-boot <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> src <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> main <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> java <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> com <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> ontimize <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> projectwiki <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> security <ul> <li data-jstree="{&quot;selected&quot;: true, &quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">CustomSecurityAutoConfiguration.java</li> <li data-jstree="{&quot;selected&quot;: true, &quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">LdapAuthenticationMechanism.java</li> <li data-jstree="{&quot;selected&quot;: true, &quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">LdapError.java</li> </ul> </li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">ServerApplication.java</li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> resources <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">application.yml</li> </ul> </li> </ul> </li> </ul> </li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">pom.xml</li> </ul> </li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> projectwiki-model <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> src <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> main <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> db <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">templateDB.properties</li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">templateDB.script</li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">templateDB.txt</li> </ul> </li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> java <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> com <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> ontimize <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> projectwiki <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> model <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> core <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> dao <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">UserDao.java</li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">UserRoleDao.java</li> </ul> </li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> service <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">UserService.java</li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> resources <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> dao <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">placeholders.properties</li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">RoleDao.xml</li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">RoleServerPermissionDao.xml</li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">ServerPermissionDao.xml</li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">UserDao.xml</li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">UserRoleDao.xml</li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">pom.xml</li> </ul> </li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> projectwiki-ws <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> src <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> main <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> java <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> com <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> ontimize <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> projectwiki <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> ws <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> core <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> rest <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">MainRestController.java</li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">TestRestController.java</li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">UserRestController.java</li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">pom.xml</li> </ul> </li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">.gitignore</li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">pom.xml</li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">README.md</li> </ul> </li> </ul> </div> <div class="multiColumn multiColumnGrow"> <p><strong>LdapError.java</strong></p> <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">com.ontimize.projectwiki.security</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">LdapError</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">NO_LDAP_CONNECTION</span> <span class="o">=</span> <span class="s">"NO_CONNECT_TO_LDAP"</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">ERROR_SEARCHING_IN_LDAP</span> <span class="o">=</span> <span class="s">"ERROR_SEARCHING_IN_LDAP"</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">ERROR_LOGIN_LDAP</span> <span class="o">=</span> <span class="s">"LOGINEXCEPTION_WITH_LDAP"</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">ERROR_IO_LDAP</span> <span class="o">=</span> <span class="s">"IOEXCEPTION_WITH_LDAP"</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">EMPTY_LDAP_HOST</span> <span class="o">=</span> <span class="s">"HOST_CANNOT_BE_EMPTY"</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">EMPTY_LDAP_USER</span> <span class="o">=</span> <span class="s">"USER_CANNOT_BE_EMPTY"</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">EMPTY_LDAP_PASSWORD</span> <span class="o">=</span> <span class="s">"PASSWORD_CANNOT_BE_EMPTY"</span><span class="o">;;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">LDAP_AUTH_USER_PASS_NOT_VALID</span> <span class="o">=</span> <span class="s">"LDAP_CREDENTIALS_NOT_VALID"</span><span class="o">;</span>

<span class="o">}</span></code></pre></figure> <p><strong>LdapAuthenticationMechanism.java</strong></p> <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">com.ontimize.projectwiki.security</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.UnsupportedEncodingException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Hashtable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.StringTokenizer</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.naming.Context</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.naming.NamingException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.naming.directory.DirContext</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.naming.directory.InitialDirContext</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.security.auth.login.LoginException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletResponse</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.ontimize.jee.server.security.authentication.ldap.LdapError</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.aspectj.weaver.Utils</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.slf4j.Logger</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.slf4j.LoggerFactory</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Value</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.security.authentication.AuthenticationManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.security.authentication.BadCredentialsException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.security.authentication.UsernamePasswordAuthenticationToken</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.security.core.userdetails.UserDetailsService</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.security.crypto.codec.Base64</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Component</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.ontimize.jee.server.security.authentication.AuthenticationResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.ontimize.jee.server.security.authentication.IAuthenticationMechanism</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.ontimize.jee.server.security.authentication.OntimizeAuthenticationProvider</span><span class="o">;</span>

<span class="nd">@Component</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LdapAuthenticationMechanism</span> <span class="kd">implements</span> <span class="nc">IAuthenticationMechanism</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Logger</span> <span class="no">LOGGER</span> <span class="o">=</span> <span class="nc">LoggerFactory</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="nc">LdapAuthenticationMechanism</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">credentialsCharset</span> <span class="o">=</span> <span class="s">"UTF-8"</span><span class="o">;</span>
    <span class="nd">@Value</span><span class="o">(</span><span class="s">"${ldap.host}"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">ldapHost</span><span class="o">;</span>
    <span class="nd">@Value</span><span class="o">(</span><span class="s">"${ldap.port}"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">ldapPort</span><span class="o">;</span>
    <span class="nd">@Value</span><span class="o">(</span><span class="s">"${ldap.loginType}"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">loginType</span><span class="o">;</span>
    <span class="nd">@Value</span><span class="o">(</span><span class="s">"${ldap.bind.dn}"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">ldapBindDn</span><span class="o">;</span>
    <span class="nd">@Value</span><span class="o">(</span><span class="s">"${ldap.domain}"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">ldapDomain</span><span class="o">;</span>
    <span class="nd">@Value</span><span class="o">(</span><span class="s">"${ldap.base.dn}"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">ldapBaseDn</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">AuthenticationResult</span> <span class="nf">authenticate</span><span class="o">(</span><span class="kd">final</span> <span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="kd">final</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> 
                                             <span class="kd">final</span> <span class="nc">AuthenticationManager</span> <span class="n">authenticationManager</span><span class="o">,</span> <span class="kd">final</span> <span class="nc">UserDetailsService</span> <span class="n">userDetailsService</span><span class="o">)</span> <span class="o">{</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="kd">final</span> <span class="nc">String</span> <span class="n">header</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getHeader</span><span class="o">(</span><span class="s">"Authorization"</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">((</span><span class="n">header</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">||</span> <span class="o">!</span><span class="n">header</span><span class="o">.</span><span class="na">startsWith</span><span class="o">(</span><span class="s">"Basic "</span><span class="o">))</span> <span class="o">{</span>
                <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
            <span class="o">}</span>

            <span class="kd">final</span> <span class="nc">String</span><span class="o">[]</span> <span class="n">tokens</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">extractAndDecodeHeader</span><span class="o">(</span><span class="n">header</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
            <span class="k">assert</span> <span class="n">tokens</span><span class="o">.</span><span class="na">length</span> <span class="o">==</span> <span class="mi">2</span><span class="o">;</span>
            <span class="kd">final</span> <span class="nc">String</span> <span class="n">username</span> <span class="o">=</span> <span class="n">tokens</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
            <span class="kd">final</span> <span class="nc">String</span> <span class="n">password</span> <span class="o">=</span> <span class="n">tokens</span><span class="o">[</span><span class="mi">1</span><span class="o">];</span>

            <span class="nc">LdapAuthenticationMechanism</span><span class="o">.</span><span class="na">LOGGER</span><span class="o">.</span><span class="na">trace</span><span class="o">(</span><span class="s">"Validating access for user : '{}'"</span><span class="o">,</span> <span class="n">username</span><span class="o">);</span>

            <span class="nc">DirContext</span> <span class="n">dirContext</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

            <span class="k">if</span> <span class="o">(</span><span class="n">loginType</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"DN"</span><span class="o">))</span> <span class="o">{</span>
                <span class="nc">String</span> <span class="n">userDn</span> <span class="o">=</span> <span class="s">"uid="</span> <span class="o">+</span> <span class="n">username</span> <span class="o">+</span> <span class="s">","</span> <span class="o">+</span> <span class="n">ldapBindDn</span><span class="o">;</span>
                <span class="n">dirContext</span> <span class="o">=</span> <span class="n">connect</span><span class="o">(</span><span class="n">userDn</span><span class="o">,</span> <span class="n">password</span><span class="o">,</span> <span class="n">ldapHost</span><span class="o">,</span> <span class="n">ldapPort</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">loginType</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"simple"</span><span class="o">))</span> <span class="o">{</span>
                <span class="n">dirContext</span> <span class="o">=</span> <span class="n">connect</span><span class="o">(</span><span class="n">username</span><span class="o">,</span> <span class="n">password</span><span class="o">,</span> <span class="n">ldapHost</span><span class="o">,</span> <span class="n">ldapPort</span><span class="o">,</span> <span class="n">ldapDomain</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
            <span class="o">}</span>

            <span class="k">if</span> <span class="o">(</span><span class="n">dirContext</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">return</span> <span class="k">new</span> <span class="nf">AuthenticationResult</span><span class="o">(</span><span class="kc">true</span><span class="o">,</span> <span class="k">new</span> <span class="nc">UsernamePasswordAuthenticationToken</span><span class="o">(</span><span class="n">username</span><span class="o">,</span>
                        <span class="nc">OntimizeAuthenticationProvider</span><span class="o">.</span><span class="na">NO_AUTHENTICATION_TOKEN</span><span class="o">));</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="no">LOGGER</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"System authentication failed: no connect to LDAP"</span><span class="o">);</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">BadCredentialsException</span><span class="o">(</span><span class="nc">LdapError</span><span class="o">.</span><span class="na">NO_LDAP_CONNECTION</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">NamingException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="no">LOGGER</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"System authentication failed: NamingException searching into server LDAP"</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">BadCredentialsException</span><span class="o">(</span><span class="nc">LdapError</span><span class="o">.</span><span class="na">ERROR_SEARCHING_IN_LDAP</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">LoginException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="no">LOGGER</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"System authentication failed: LoginException with server LDAP"</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">BadCredentialsException</span><span class="o">(</span><span class="nc">LdapError</span><span class="o">.</span><span class="na">ERROR_LOGIN_LDAP</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="no">LOGGER</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"System authentication failed: IOException with server LDAP"</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">BadCredentialsException</span><span class="o">(</span><span class="nc">LdapError</span><span class="o">.</span><span class="na">ERROR_IO_LDAP</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
        <span class="o">}</span>

    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">synchronized</span> <span class="nc">DirContext</span> <span class="nf">connect</span><span class="o">(</span><span class="kd">final</span> <span class="nc">String</span> <span class="n">user</span><span class="o">,</span> <span class="kd">final</span> <span class="nc">String</span> <span class="n">password</span><span class="o">,</span> <span class="kd">final</span> <span class="nc">String</span> <span class="n">hosts</span><span class="o">,</span>
                                                  <span class="kd">final</span> <span class="kt">int</span> <span class="n">port</span><span class="o">,</span> <span class="kd">final</span> <span class="nc">String</span> <span class="n">adddomain</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">ssl</span><span class="o">)</span>
            <span class="kd">throws</span> <span class="nc">NamingException</span><span class="o">,</span> <span class="n">java</span><span class="o">.</span><span class="na">io</span><span class="o">.</span><span class="na">IOException</span><span class="o">,</span> <span class="nc">LoginException</span> <span class="o">{</span>

        <span class="k">if</span> <span class="o">((</span><span class="n">hosts</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">||</span> <span class="o">(</span><span class="n">hosts</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span><span class="o">))</span> <span class="o">{</span>
            <span class="no">LOGGER</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"LDAP host cannot be neither null nor empty"</span><span class="o">);</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="nc">LdapError</span><span class="o">.</span><span class="na">EMPTY_LDAP_HOST</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
        <span class="o">}</span>

        <span class="nc">StringTokenizer</span> <span class="n">st</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringTokenizer</span><span class="o">(</span><span class="n">hosts</span><span class="o">,</span> <span class="s">";"</span><span class="o">);</span>

        <span class="k">while</span> <span class="o">(</span><span class="n">st</span><span class="o">.</span><span class="na">hasMoreTokens</span><span class="o">())</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">host</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="na">nextToken</span><span class="o">();</span>
            <span class="k">return</span> <span class="nf">_connect</span><span class="o">(</span><span class="n">user</span><span class="o">,</span> <span class="n">password</span><span class="o">,</span> <span class="n">host</span><span class="o">,</span> <span class="n">port</span><span class="o">,</span> <span class="n">adddomain</span><span class="o">,</span> <span class="n">ssl</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>

    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">synchronized</span> <span class="nc">DirContext</span> <span class="nf">_connect</span><span class="o">(</span><span class="kd">final</span> <span class="nc">String</span> <span class="n">user</span><span class="o">,</span> <span class="kd">final</span> <span class="nc">String</span> <span class="n">password</span><span class="o">,</span> <span class="kd">final</span> <span class="nc">String</span> <span class="n">host</span><span class="o">,</span>
                                                    <span class="kd">final</span> <span class="kt">int</span> <span class="n">port</span><span class="o">,</span> <span class="kd">final</span> <span class="nc">String</span> <span class="n">adddomain</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">ssl</span><span class="o">)</span>
            <span class="kd">throws</span> <span class="nc">NamingException</span><span class="o">,</span> <span class="n">java</span><span class="o">.</span><span class="na">io</span><span class="o">.</span><span class="na">IOException</span><span class="o">,</span> <span class="nc">LoginException</span> <span class="o">{</span>

        <span class="nc">Hashtable</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">props</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hashtable</span><span class="o">&lt;&gt;();</span>
        <span class="k">if</span> <span class="o">((</span><span class="n">user</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">||</span> <span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span><span class="o">))</span> <span class="o">{</span>
            <span class="no">LOGGER</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"user cannot be neither null nor empty"</span><span class="o">);</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="nc">LdapError</span><span class="o">.</span><span class="na">EMPTY_LDAP_USER</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

        <span class="o">}</span>

        <span class="k">if</span> <span class="o">((</span><span class="n">password</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">||</span> <span class="o">(</span><span class="n">password</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span><span class="o">))</span> <span class="o">{</span>
            <span class="no">LOGGER</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"password cannot be neither null nor empty"</span><span class="o">);</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="nc">LdapError</span><span class="o">.</span><span class="na">EMPTY_LDAP_PASSWORD</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

        <span class="o">}</span>

        <span class="n">props</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="nc">Context</span><span class="o">.</span><span class="na">INITIAL_CONTEXT_FACTORY</span><span class="o">,</span> <span class="s">"com.sun.jndi.ldap.LdapCtxFactory"</span><span class="o">);</span>
        <span class="n">props</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="nc">Context</span><span class="o">.</span><span class="na">PROVIDER_URL</span><span class="o">,</span> <span class="s">"ldap://"</span> <span class="o">+</span> <span class="n">host</span> <span class="o">+</span> <span class="s">":"</span> <span class="o">+</span> <span class="n">port</span><span class="o">);</span>
        <span class="n">props</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="nc">Context</span><span class="o">.</span><span class="na">SECURITY_AUTHENTICATION</span><span class="o">,</span> <span class="s">"simple"</span><span class="o">);</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">adddomain</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">props</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="nc">Context</span><span class="o">.</span><span class="na">SECURITY_PRINCIPAL</span><span class="o">,</span> <span class="n">user</span> <span class="o">+</span> <span class="s">"@"</span> <span class="o">+</span> <span class="n">adddomain</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">props</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="nc">Context</span><span class="o">.</span><span class="na">SECURITY_PRINCIPAL</span><span class="o">,</span> <span class="n">user</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="n">props</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="nc">Context</span><span class="o">.</span><span class="na">SECURITY_CREDENTIALS</span><span class="o">,</span> <span class="n">password</span><span class="o">);</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">ssl</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">props</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="nc">Context</span><span class="o">.</span><span class="na">SECURITY_PROTOCOL</span><span class="o">,</span> <span class="s">"ssl"</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="n">props</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="nc">Context</span><span class="o">.</span><span class="na">REFERRAL</span><span class="o">,</span> <span class="s">"follow"</span><span class="o">);</span>
        <span class="nc">DirContext</span> <span class="n">ctx</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="n">ctx</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">InitialDirContext</span><span class="o">(</span><span class="n">props</span><span class="o">);</span>
            <span class="no">LOGGER</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"Authentication sucessfully in LDAP"</span><span class="o">);</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="no">LOGGER</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"System authentication failed: wrong user and/or pass in LDAP"</span><span class="o">);</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">BadCredentialsException</span><span class="o">(</span><span class="nc">LdapError</span><span class="o">.</span><span class="na">LDAP_AUTH_USER_PASS_NOT_VALID</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

        <span class="o">}</span>

        <span class="k">return</span> <span class="n">ctx</span><span class="o">;</span>

    <span class="o">}</span>

    <span class="kd">private</span> <span class="nc">String</span><span class="o">[]</span> <span class="nf">extractAndDecodeHeader</span><span class="o">(</span><span class="kd">final</span> <span class="nc">String</span> <span class="n">header</span><span class="o">,</span> <span class="kd">final</span> <span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="kd">final</span> <span class="kt">byte</span><span class="o">[]</span> <span class="n">base64Token</span> <span class="o">=</span> <span class="n">header</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">6</span><span class="o">).</span><span class="na">getBytes</span><span class="o">(</span><span class="s">"UTF-8"</span><span class="o">);</span>
            <span class="kt">byte</span><span class="o">[]</span> <span class="n">decoded</span><span class="o">;</span>
            <span class="n">decoded</span> <span class="o">=</span> <span class="nc">Base64</span><span class="o">.</span><span class="na">decode</span><span class="o">(</span><span class="n">base64Token</span><span class="o">);</span>

            <span class="kd">final</span> <span class="nc">String</span> <span class="n">token</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">String</span><span class="o">(</span><span class="n">decoded</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">getCredentialsCharset</span><span class="o">(</span><span class="n">request</span><span class="o">));</span>
            <span class="kd">final</span> <span class="kt">int</span> <span class="n">delim</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="sc">':'</span><span class="o">);</span>

            <span class="k">if</span> <span class="o">(</span><span class="n">delim</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">BadCredentialsException</span><span class="o">(</span><span class="s">"Invalid basic authentication token"</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="k">return</span> <span class="k">new</span> <span class="nc">String</span><span class="o">[]</span> <span class="o">{</span> <span class="n">token</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">delim</span><span class="o">),</span> <span class="n">token</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">delim</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">};</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IllegalArgumentException</span> <span class="o">|</span> <span class="nc">UnsupportedEncodingException</span> <span class="n">error</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">BadCredentialsException</span><span class="o">(</span><span class="s">"Failed to decode basic authentication token"</span><span class="o">,</span> <span class="n">error</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">protected</span> <span class="nc">String</span> <span class="nf">getCredentialsCharset</span><span class="o">(</span><span class="kd">final</span> <span class="nc">HttpServletRequest</span> <span class="n">httpRequest</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">credentialsCharset</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure> <p><strong>CustomSecurityAutoConfiguration.java</strong></p> <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">com.ontimize.projectwiki.security</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Value</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.autoconfigure.EnableAutoConfiguration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.autoconfigure.condition.ConditionalOnProperty</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Bean</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.security.config.annotation.web.configuration.EnableWebSecurity</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.ontimize.boot.autoconfigure.security.DefaultSecurityAutoConfiguration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.ontimize.jee.server.security.authentication.IAuthenticationMechanism</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.ontimize.jee.server.security.authentication.OntimizeAuthenticationFilter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.ontimize.jee.server.security.authentication.OntimizeAuthenticationSuccessHandler</span><span class="o">;</span>

<span class="nd">@Configuration</span>
<span class="nd">@EnableWebSecurity</span>
<span class="nd">@EnableAutoConfiguration</span>
<span class="nd">@ConditionalOnProperty</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"ontimize.security.mode"</span><span class="o">,</span> <span class="n">havingValue</span> <span class="o">=</span> <span class="s">"ldap"</span><span class="o">,</span> <span class="n">matchIfMissing</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CustomSecurityAutoConfiguration</span> <span class="kd">extends</span> <span class="nc">DefaultSecurityAutoConfiguration</span> <span class="o">{</span>

    <span class="nd">@Value</span><span class="o">(</span><span class="s">"${ontimize.security.servicePath:/**}"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">servicePath</span><span class="o">;</span>

    <span class="nd">@Value</span><span class="o">(</span><span class="s">"${ontimize.security.ignorePaths:}"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span><span class="o">[]</span> <span class="n">ignorePaths</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">OntimizeAuthenticationFilter</span> <span class="nf">preAuthFilterOntimize</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">OntimizeAuthenticationFilter</span> <span class="n">filter</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">OntimizeAuthenticationFilter</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">servicePath</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">setUserDetailsService</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">userDetailsService</span><span class="o">());</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">setUserCache</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">userCache</span><span class="o">());</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">setTokenGenerator</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">tokenGenerator</span><span class="o">());</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">setGenerateJwtHeader</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">setAuthenticationManager</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">authenticationManager</span><span class="o">());</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">setAuthenticationEntryPoint</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">authenticationEntryPoint</span><span class="o">());</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">setAuthenticationMechanismList</span><span class="o">(</span><span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;());</span>
    	<span class="n">filter</span><span class="o">.</span><span class="na">getAuthenticationMechanismList</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">jwtAuthenticator</span><span class="o">());</span>
    	<span class="n">filter</span><span class="o">.</span><span class="na">getAuthenticationMechanismList</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">ldapAuthenticator</span><span class="o">());</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">setAuthenticationSuccessHandler</span><span class="o">(</span><span class="k">new</span> <span class="nc">OntimizeAuthenticationSuccessHandler</span><span class="o">());</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">afterPropertiesSet</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">filter</span><span class="o">;</span>

    <span class="o">}</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="nc">IAuthenticationMechanism</span> <span class="nf">ldapAuthenticator</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">LdapAuthenticationMechanism</span><span class="o">();</span>
    <span class="o">}</span>

<span class="o">}</span></code></pre></figure> </div> </div> <h2 id="modify-applicationyml"> <a href="#modify-applicationyml" class="anchor-heading" aria-labelledby="modify-applicationyml"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Modify application.yml </h2> <h3 id="add-ldap-properties"> <a href="#add-ldap-properties" class="anchor-heading" aria-labelledby="add-ldap-properties"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Add LDAP properties </h3> <p>In the <em>application.yml</em> we need to change the ontimize security mode to <strong>ldap</strong> and add the following properties (More information in <a href="https://ontimize.github.io/docs/v1/basics/autoconfigurators/#ldap">this link</a>):</p> <div class="multiColumnRow"> <div class="multiColumn jstreeloader"> <ul> <li data-jstree="{&quot;opened&quot;:true, &quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> ontimize-examples <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> projectwiki-api <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> src <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> main <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> java <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> com <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> ontimize <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> projectwiki <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> api <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> core <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> service <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">IUserService.java</li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">pom.xml</li> </ul> </li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> projectwiki-boot <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> src <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> main <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> java <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> com <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> ontimize <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> projectwiki <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> security <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">CustomSecurityAutoConfiguration.java</li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">LdapAuthenticationMechanism.java</li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">LdapError.java</li> </ul> </li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">ServerApplication.java</li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> resources <ul> <li data-jstree="{&quot;selected&quot;: true, &quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">application.yml</li> </ul> </li> </ul> </li> </ul> </li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">pom.xml</li> </ul> </li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> projectwiki-model <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> src <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> main <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> db <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">templateDB.properties</li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">templateDB.script</li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">templateDB.txt</li> </ul> </li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> java <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> com <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> ontimize <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> projectwiki <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> model <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> core <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> dao <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">UserDao.java</li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">UserRoleDao.java</li> </ul> </li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> service <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">UserService.java</li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> resources <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> dao <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">placeholders.properties</li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">RoleDao.xml</li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">RoleServerPermissionDao.xml</li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">ServerPermissionDao.xml</li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">UserDao.xml</li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">UserRoleDao.xml</li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">pom.xml</li> </ul> </li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> projectwiki-ws <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> src <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> main <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> java <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> com <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> ontimize <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> projectwiki <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> ws <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> core <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-folder-open.svg&quot;}"> rest <ul> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">MainRestController.java</li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">TestRestController.java</li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">UserRestController.java</li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">pom.xml</li> </ul> </li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">.gitignore</li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">pom.xml</li> <li data-jstree="{&quot;icon&quot;:&quot;https://ontimize.github.io/docs/v1/assets/jstree/fa-file.svg&quot;}">README.md</li> </ul> </li> </ul> </div> <div class="multiColumn multiColumnGrow"> <p><strong>application.yml</strong></p> <figure class="highlight"><pre><code class="language-yml" data-lang="yml"><span class="na">ontimize</span><span class="pi">:</span>
   <span class="na">security</span><span class="pi">:</span>
      <span class="na">mode</span><span class="pi">:</span> <span class="s">ldap</span>
<span class="na">ldap</span><span class="pi">:</span> 
   <span class="na">active</span><span class="pi">:</span> <span class="kc">true</span> 
   <span class="na">host</span><span class="pi">:</span> <span class="s">10.0.0.1</span>
   <span class="na">port</span><span class="pi">:</span> <span class="m">389</span>
   <span class="na">login-type</span><span class="pi">:</span> <span class="s">simple</span>
   <span class="na">bind.dn</span><span class="pi">:</span> 
   <span class="na">base.dn</span><span class="pi">:</span> 
   <span class="na">domain</span><span class="pi">:</span> <span class="s">yourdomain.com</span></code></pre></figure> </div> </div> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
